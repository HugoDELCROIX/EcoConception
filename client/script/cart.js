const reviewContainer=document.getElementById("review-container"),exportBtn=document.getElementById("export-btn"),exportLayout=document.getElementById("export-layout");import{getCartStorage,initializeCart}from"./modules.js";function getGroupedPracticies(e){return e.reduce(((e,t)=>{const{lifecycle:n}=t;return e[n]=e[n]??[],e[n].push(t),e}),{})}function populateReviewContainer(e){reviewContainer.innerHTML="";for(let[t,n]of Object.entries(e))reviewContainer.appendChild(makeReviewCount(t,n.length))}function makeReviewCount(e,t){const n=document.createElement("p");return n.innerHTML=`${e}: ${t} critÃ¨res`,n}function exportFile(e){let t=document.createElement("html"),n=exportLayout.content.cloneNode(!0),r=n.querySelector("tbody");for(let[t,n]of Object.entries(e))n.forEach((e=>{let{keystep:n,criteria:o,indicator:i}=e,a=document.createElement("tr");a.innerHTML=`\n      <td>${t}</td>\n      <td>${o}</td>\n      <td>${n}</td>\n      <td>${i}</td>\n    `,r.appendChild(a)}));t.appendChild(n);var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t.innerHTML)),o.setAttribute("download","rapport.html"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}!async function(){null===getCartStorage()&&await initializeCart();let e=getGroupedPracticies(getCartStorage());populateReviewContainer(e),exportBtn.addEventListener("click",(()=>{exportFile(e)}))}();