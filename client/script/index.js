const practiciesContainer=document.getElementById("practicies-container"),paginationContainer=document.getElementById("pagination-container");import{getPracticies,getCartStorage,setCartStorage,initializeCart}from"./modules.js";let currentPage=0,practiciesPerPage=20;!async function(){null===getCartStorage()&&await initializeCart();let e=getCartStorage();const t=await getPracticies();let n=t;async function i(e){practiciesContainer.innerHTML="";let t=e*practiciesPerPage,i=t+practiciesPerPage,r=n.slice(t,i);for(let e=0;e<r.length;e++)practiciesContainer.appendChild(a(r[e]))}function a(t){const{_id:n,categories:i,criteria:a}=t,r="<img src='./assets/images/plus.svg' alt='Ajouter au panier'>",c="<img src='./assets/images/minus.svg' alt='Retirer du panier'>";let o=document.createElement("div");if(o.classList.add("practice-container"),o.innerHTML=`\n      <h1>${i[0]}</h1>\n      <hr>\n      <p>${a}</p>\n    `,t.isVital)o.classList.add("isVital");else{let i=null!=e.find((e=>e._id==n));const a=document.createElement("button");a.innerHTML=r,i&&(o.classList.add("isSelected"),a.innerHTML=c),a.addEventListener("click",(()=>{e=getCartStorage(),i?(i=!1,console.log("Removing"),function(t){const n=e.indexOf(t);e.splice(n,1),setCartStorage(e)}(t)):(i=!0,console.log("Adding"),function(e){let t=getCartStorage();t.push(e),setCartStorage(t)}(t)),a.innerHTML=i?c:r,o.classList.toggle("isSelected")})),o.appendChild(a)}return o}function r(){paginationContainer.innerHTML="";let e=Math.ceil(n.length/practiciesPerPage);for(let t=0;t<e;t++)paginationContainer.appendChild(c(t))}function c(e){let t=document.createElement("button");return t.innerText=e,t.addEventListener("click",(()=>{currentPage=e,i(currentPage)})),t}!function(){const e=document.getElementById("familiesSelector"),a=["Tout","Architecture","Back-end","Contenus","Front-end","Hébergement","Spécifications","Stratégie","Ux/Ui"];a.forEach(((t,n)=>{let i=document.createElement("option");i.text=t,i.value=n,e.appendChild(i)})),e.addEventListener("change",(async e=>{n=t,n=0==e.target.value?n:n.filter((t=>t.familyName===a[e.target.value])),currentPage=0,i(currentPage),r()}))}(),i(currentPage),r()}();